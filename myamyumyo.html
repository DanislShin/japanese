<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì‘ì€ ã‚„ãƒ»ã‚†ãƒ»ã‚ˆ / ì‘ì€ ã£ ì—°ìŠµ</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        max-width: 980px;
        margin: 0 auto;
        padding: 24px;
        line-height: 1.7;
        background: #faf7f0;
      }
      h1,
      h2,
      h3 {
        margin: 0.4em 0;
      }
      h1 {
        font-size: 1.8rem;
        text-align: center;
      }

      p.lead {
        text-align: center;
        color: #555;
        margin-bottom: 1.5rem;
      }

      .notice {
        background: #fff7d1;
        border-left: 4px solid #f2b705;
        padding: 10px 12px;
        margin: 12px 0 20px;
        font-size: 0.9rem;
      }

      .section {
        background: #ffffff;
        border-radius: 10px;
        padding: 16px 18px;
        margin-top: 16px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
      }

      .buttons-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin: 8px 0 4px;
      }

      button {
        border-radius: 999px;
        border: 1px solid #ddd;
        padding: 6px 12px;
        background: #ffffff;
        cursor: pointer;
        font-size: 0.85rem;
      }
      button:hover {
        background: #ffeec7;
      }
      button:disabled {
        opacity: 0.4;
        cursor: default;
      }

      .grid-title {
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 0.95rem;
      }

      .kana-grid {
        display: grid;
        grid-template-columns: repeat(6, minmax(60px, 1fr));
        gap: 6px;
        margin-top: 8px;
      }

      .kana-cell {
        background: #fff;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
        padding: 6px 2px 8px;
        text-align: center;
        cursor: pointer;
        transition: background 0.15s, transform 0.05s, box-shadow 0.05s;
        user-select: none;
      }

      .kana-cell.small {
        font-size: 1.4rem;
        font-weight: 600;
      }
      .kana-cell.word {
        font-size: 1.4rem;
      }

      .kana-kana {
        display: block;
      }
      .kana-romaji {
        display: block;
        margin-top: 2px;
        font-size: 0.7rem;
        color: #666;
      }
      .kana-meaning {
        display: block;
        margin-top: 2px;
        font-size: 0.7rem;
        color: #888;
      }

      .kana-cell:hover {
        background: #fff5d6;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
        transform: translateY(-1px);
      }
      .kana-cell:active {
        transform: translateY(0);
        box-shadow: none;
        background: #ffe5a2;
      }

      .hint {
        font-size: 0.8rem;
        color: #777;
        margin-top: 4px;
      }

      .footer-note {
        font-size: 0.8rem;
        color: #777;
        margin-top: 18px;
      }

      @media (max-width: 600px) {
        .kana-grid {
          grid-template-columns: repeat(5, minmax(50px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <h1>ì‘ì€ ã‚„ãƒ»ã‚†ãƒ»ã‚ˆ / ì‘ì€ ã£ ì—°ìŠµ</h1>
    <p class="lead">
      - ê¸€ì ì¹¸ í´ë¦­ â†’ ê·¸ <b>íˆë¼ê°€ë‚˜ ë¬¶ìŒ</b>ë§Œ ì½ê¸°<br />
      - ë‹¨ì–´ ì¹¸ í´ë¦­ â†’ <b>ë‹¨ì–´ë§Œ</b> ì½ê¸°
    </p>

    <div class="notice">
      ğŸ”Š <b>ìŒì„± ì•ˆë‚´</b><br />
      Â· ë¸Œë¼ìš°ì € ë‚´ì¥ ì¼ë³¸ì–´ TTSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê¸°ê¸°/ë¸Œë¼ìš°ì €ë§ˆë‹¤ ëª©ì†Œë¦¬ê°€ ì¡°ê¸ˆì”©
      ë‹¤ë¥¼ ìˆ˜ ìˆì–´ìš”.<br />
      Â· ê¸°ë³¸ì ìœ¼ë¡œ <b>ì—¬ì„± ì¼ë³¸ì–´ ìŒì„±</b>ì„ ìš°ì„  ì„ íƒí•˜ê³ , ì†ë„ëŠ” ì•½ê°„ ëŠë¦¬ê²Œ
      ë§ì¶°ë‘ì—ˆìŠµë‹ˆë‹¤.
    </div>

    <!-- 4. ì‘ì€ ã‚„ãƒ»ã‚†ãƒ»ã‚ˆ -->
    <div class="section">
      <h2>4. ì‘ì€ ã‚„ãƒ»ã‚†ãƒ»ã‚ˆ (ã‚ƒãƒ»ã‚…ãƒ»ã‚‡) ì¡°í•©</h2>
      <p style="margin-bottom: 6px">
        ììŒ + ì‘ì€ ã‚„/ã‚†/ã‚ˆ ì¡°í•©ì„ í•œ ë²ˆì— ë³´ë©´ì„œ ì†Œë¦¬ë¡œ ìµíˆê¸°.
      </p>
      <div class="grid-title">
        k / s / t / n / h / m / r + ã‚ƒãƒ»ã‚…ãƒ»ã‚‡ (ëŒ€í‘œí˜•)
      </div>
      <div class="kana-grid">
        <!-- ya -->
        <div class="kana-cell small" data-kana="ãã‚ƒ">
          <span class="kana-kana">ãã‚ƒ</span>
          <span class="kana-romaji">kya</span>
        </div>
        <div class="kana-cell small" data-kana="ã—ã‚ƒ">
          <span class="kana-kana">ã—ã‚ƒ</span>
          <span class="kana-romaji">sha</span>
        </div>
        <div class="kana-cell small" data-kana="ã¡ã‚ƒ">
          <span class="kana-kana">ã¡ã‚ƒ</span>
          <span class="kana-romaji">cha</span>
        </div>
        <div class="kana-cell small" data-kana="ã«ã‚ƒ">
          <span class="kana-kana">ã«ã‚ƒ</span>
          <span class="kana-romaji">nya</span>
        </div>
        <div class="kana-cell small" data-kana="ã²ã‚ƒ">
          <span class="kana-kana">ã²ã‚ƒ</span>
          <span class="kana-romaji">hya</span>
        </div>
        <div class="kana-cell small" data-kana="ã¿ã‚ƒ">
          <span class="kana-kana">ã¿ã‚ƒ</span>
          <span class="kana-romaji">mya</span>
        </div>

        <!-- yu -->
        <div class="kana-cell small" data-kana="ãã‚…">
          <span class="kana-kana">ãã‚…</span>
          <span class="kana-romaji">kyu</span>
        </div>
        <div class="kana-cell small" data-kana="ã—ã‚…">
          <span class="kana-kana">ã—ã‚…</span>
          <span class="kana-romaji">shu</span>
        </div>
        <div class="kana-cell small" data-kana="ã¡ã‚…">
          <span class="kana-kana">ã¡ã‚…</span>
          <span class="kana-romaji">chu</span>
        </div>
        <div class="kana-cell small" data-kana="ã«ã‚…">
          <span class="kana-kana">ã«ã‚…</span>
          <span class="kana-romaji">nyu</span>
        </div>
        <div class="kana-cell small" data-kana="ã²ã‚…">
          <span class="kana-kana">ã²ã‚…</span>
          <span class="kana-romaji">hyu</span>
        </div>
        <div class="kana-cell small" data-kana="ã¿ã‚…">
          <span class="kana-kana">ã¿ã‚…</span>
          <span class="kana-romaji">myu</span>
        </div>

        <!-- yo -->
        <div class="kana-cell small" data-kana="ãã‚‡">
          <span class="kana-kana">ãã‚‡</span>
          <span class="kana-romaji">kyo</span>
        </div>
        <div class="kana-cell small" data-kana="ã—ã‚‡">
          <span class="kana-kana">ã—ã‚‡</span>
          <span class="kana-romaji">sho</span>
        </div>
        <div class="kana-cell small" data-kana="ã¡ã‚‡">
          <span class="kana-kana">ã¡ã‚‡</span>
          <span class="kana-romaji">cho</span>
        </div>
        <div class="kana-cell small" data-kana="ã«ã‚‡">
          <span class="kana-kana">ã«ã‚‡</span>
          <span class="kana-romaji">nyo</span>
        </div>
        <div class="kana-cell small" data-kana="ã²ã‚‡">
          <span class="kana-kana">ã²ã‚‡</span>
          <span class="kana-romaji">hyo</span>
        </div>
        <div class="kana-cell small" data-kana="ã¿ã‚‡">
          <span class="kana-kana">ã¿ã‚‡</span>
          <span class="kana-romaji">myo</span>
        </div>
      </div>

      <div class="grid-title" style="margin-top: 10px">
        ëŒ€í‘œ ì˜ˆì œ ë‹¨ì–´ (ì‘ì€ ã‚ƒãƒ»ã‚…ãƒ»ã‚‡ í¬í•¨)
      </div>
      <div class="kana-grid">
        <div class="kana-cell word" data-speak="ãã‚ƒã">
          <span class="kana-kana">ãã‚ƒã</span>
          <span class="kana-romaji">kyaku</span>
          <span class="kana-meaning">ì†ë‹˜</span>
        </div>
        <div class="kana-cell word" data-speak="ã—ã‚ƒã—ã‚“">
          <span class="kana-kana">ã—ã‚ƒã—ã‚“</span>
          <span class="kana-romaji">shashin</span>
          <span class="kana-meaning">ì‚¬ì§„</span>
        </div>
        <div class="kana-cell word" data-speak="ã¡ã‚‡ã†ã©">
          <span class="kana-kana">ã¡ã‚‡ã†ã©</span>
          <span class="kana-romaji">choudo</span>
          <span class="kana-meaning">ë”±, ì •í™•íˆ</span>
        </div>
        <div class="kana-cell word" data-speak="ã«ã‚ƒã‚“ã“">
          <span class="kana-kana">ã«ã‚ƒã‚“ã“</span>
          <span class="kana-romaji">nyanko</span>
          <span class="kana-meaning">ê³ ì–‘ì´(ì• ì¹­)</span>
        </div>
        <div class="kana-cell word" data-speak="ãã‚…ã†">
          <span class="kana-kana">ãã‚…ã†</span>
          <span class="kana-romaji">kyuu</span>
          <span class="kana-meaning">êµ¬, ê¸‰/ê¸‰í•¨ ë“± ë¬¸ë§¥ì— ë”°ë¼</span>
        </div>
        <div class="kana-cell word" data-speak="ãã‚‡ã†">
          <span class="kana-kana">ãã‚‡ã†</span>
          <span class="kana-romaji">kyou</span>
          <span class="kana-meaning">ì˜¤ëŠ˜</span>
        </div>
      </div>

      <div class="hint">
        Â· ìœ„ ì‘ì€ ê¸€ì ì¡°í•© ì¹¸(ãã‚ƒ, ãã‚…, ãã‚‡ ë“±)ì„ ëˆŒëŸ¬ì„œ ì†Œë¦¬ ë¨¼ì €
        ìµíˆê³ ,<br />
        Â· ì•„ë˜ ì˜ˆì œ ë‹¨ì–´ ì¹¸(ãã‚ƒã, ã—ã‚ƒã—ã‚“ ë“±)ì„ ëˆŒëŸ¬ì„œ ì‹¤ì œ ë‹¨ì–´ ì•ˆì—ì„œ ë‹¤ì‹œ
        í™•ì¸.
      </div>
    </div>

    <!-- 5. ì‘ì€ ã£ -->
    <div class="section">
      <h2>5. ì‘ì€ ã£ (ì´‰ìŒ) ì˜ˆì‹œ ë‹¨ì–´</h2>
      <p style="margin-bottom: 6px">
        ì‘ì€ ã£ ë’¤ì—ì„œ <b>ììŒì´ í•œ ë²ˆ ëŠì–´ì¡Œë‹¤ê°€</b> ì´ì–´ì§€ëŠ” ëŠë‚Œì„ ê·€ë¡œ
        ìµíˆê¸°.
      </p>
      <div class="kana-grid">
        <div class="kana-cell word" data-speak="ã–ã£ã—">
          <span class="kana-kana">ã–ã£ã—</span>
          <span class="kana-romaji">zasshi</span>
          <span class="kana-meaning">ì¡ì§€</span>
        </div>
        <div class="kana-cell word" data-speak="ãŒã£ã">
          <span class="kana-kana">ãŒã£ã</span>
          <span class="kana-romaji">gakki</span>
          <span class="kana-meaning">ì•…ê¸°</span>
        </div>
        <div class="kana-cell word" data-speak="ã¯ã£ã±">
          <span class="kana-kana">ã¯ã£ã±</span>
          <span class="kana-romaji">happa</span>
          <span class="kana-meaning">ì</span>
        </div>
        <div class="kana-cell word" data-speak="ãã£ã¦">
          <span class="kana-kana">ãã£ã¦</span>
          <span class="kana-romaji">kitte</span>
          <span class="kana-meaning">ìš°í‘œ</span>
        </div>
        <div class="kana-cell word" data-speak="ã‚«ãƒƒãƒ—">
          <span class="kana-kana">ã‚«ãƒƒãƒ—</span>
          <span class="kana-romaji">kappu</span>
          <span class="kana-meaning">ì»µ</span>
        </div>
        <div class="kana-cell word" data-speak="ã‚ã£ã">
          <span class="kana-kana">ã‚ã£ã</span>
          <span class="kana-romaji">rokku</span>
          <span class="kana-meaning">ë¡(rock)</span>
        </div>
      </div>
      <div class="hint">
        Â· ê°™ì€ ììŒì´ ê²¹ì¹˜ëŠ” ë¶€ë¶„(ã£ ë’¤)ì„ ê·€ë¡œ ëŠë¼ê²Œ í•´ ì£¼ëŠ” ì—°ìŠµìš© ì„¸íŠ¸.
      </div>
    </div>

    <div class="section">
      <h2>ìŒì„± ì´ˆê¸°í™”</h2>
      <div class="buttons-row">
        <button id="btn-init-voice">ğŸ” ì¼ë³¸ì–´ ì—¬ì„± ìŒì„± ë‹¤ì‹œ ì°¾ê¸°</button>
      </div>
      <div class="hint" id="voice-status">
        ìƒíƒœ: ë¸Œë¼ìš°ì € ìŒì„± ëª©ë¡ ë¡œë”© ì¤‘...
      </div>
    </div>

    <script>
      // ì¼ë³¸ì–´ ì—¬ì„± ìŒì„± ì„ íƒ ë¡œì§
      let jaVoice = null;

      function chooseJaVoice() {
        const voices = window.speechSynthesis.getVoices();
        if (!voices || voices.length === 0) return;

        // 1ìˆœìœ„: ì¼ë³¸ì–´ + ì—¬ì„±/Female/å¥³ ë“± ì´ë¦„ì— ë“¤ì–´ê°„ ê²ƒ
        const femaleCandidates = voices.filter(
          (v) =>
            v.lang &&
            v.lang.toLowerCase().startsWith("ja") &&
            /female|ì—¬ì„±|å¥³|hiroko|kyoko|mizuki/i.test(v.name)
        );

        if (femaleCandidates.length > 0) {
          jaVoice = femaleCandidates[0];
        } else {
          // 2ìˆœìœ„: ì•„ë¬´ ì¼ë³¸ì–´ ìŒì„±
          const jaCandidates = voices.filter(
            (v) => v.lang && v.lang.toLowerCase().startsWith("ja")
          );
          if (jaCandidates.length > 0) {
            jaVoice = jaCandidates[0];
          } else {
            jaVoice = null;
          }
        }

        const status = document.getElementById("voice-status");
        if (jaVoice) {
          status.textContent = `ìƒíƒœ: "${jaVoice.name}" ì¼ë³¸ì–´ ìŒì„± ì‚¬ìš© ì¤‘ (ì†ë„ ì•½ê°„ ëŠë¦¬ê²Œ)`;
        } else {
          status.textContent =
            "ìƒíƒœ: ì¼ë³¸ì–´ ìŒì„±ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”)";
        }
      }

      function speakJa(text) {
        if (!window.speechSynthesis) return;
        if (!jaVoice) {
          chooseJaVoice();
        }
        const utter = new SpeechSynthesisUtterance(text);
        if (jaVoice) {
          utter.voice = jaVoice;
        }
        utter.lang = "ja-JP";
        utter.rate = 0.9; // ì¡°ê¸ˆ ëŠë¦¬ê²Œ
        utter.pitch = 1.0;
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utter);
      }

      document.addEventListener("DOMContentLoaded", () => {
        if (typeof speechSynthesis !== "undefined") {
          if (speechSynthesis.getVoices().length === 0) {
            speechSynthesis.onvoiceschanged = () => {
              chooseJaVoice();
            };
          } else {
            chooseJaVoice();
          }
        } else {
          const status = document.getElementById("voice-status");
          status.textContent =
            "ìƒíƒœ: ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìŒì„± í•©ì„±ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
        }

        // ì‘ì€ ã‚ƒãƒ»ã‚†ãƒ»ã‚ˆ ì¡°í•© í´ë¦­ â†’ ê·¸ ìŒì ˆ ì½ê¸°
        document.querySelectorAll(".kana-cell.small").forEach((cell) => {
          cell.addEventListener("click", () => {
            const kana = cell.getAttribute("data-kana");
            if (kana) speakJa(kana);
          });
        });

        // ë‹¨ì–´ ì¹¸ í´ë¦­ â†’ ë‹¨ì–´ ì½ê¸°
        document.querySelectorAll(".kana-cell.word").forEach((cell) => {
          cell.addEventListener("click", () => {
            const text =
              cell.getAttribute("data-speak") ||
              cell.querySelector(".kana-kana")?.textContent ||
              "";
            if (text) speakJa(text);
          });
        });

        // ìŒì„± ì¬ê²€ìƒ‰ ë²„íŠ¼
        document
          .getElementById("btn-init-voice")
          .addEventListener("click", () => {
            window.speechSynthesis.cancel();
            chooseJaVoice();
          });
      });
    </script>
  </body>
</html>
